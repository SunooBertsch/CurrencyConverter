{"version":3,"sources":["sdk.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","RTM","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","array","noop","process","nextTick","args","Array","arguments","push","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","2","root","factory","CryptoJS","Math","undefined","C","C_lib","lib","Base","F","extend","overrides","subtype","mixIn","hasOwnProperty","init","$super","create","instance","properties","propertyName","toString","clone","WordArray","words","sigBytes","encoder","Hex","stringify","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","ceil","slice","random","nBytes","rcache","m_w","m_z","mask","result","_r","C_enc","enc","hexChars","bite","join","parse","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","String","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","data","_process","doFlush","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","max","_minBufferSize","nWordsReady","nBytesReady","min","offset","_doProcessBlock","processedWords","splice","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","hash","_doFinalize","_createHelper","hasher","message","_createHmacHelper","key","HMAC","algo","3","Base64","map","_map","base64Chars","byte1","byte2","byte3","triplet","j","charAt","paddingChar","base64Str","base64StrLength","paddingIndex","indexOf","bits1","bits2","bitsCombined","./core","4","undef","HmacMD5","./hmac","./md5","5","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","hmac","6","FF","b","c","d","x","GG","HH","II","T","abs","sin","MD5","_hash","M","offset_i","M_offset_i","H","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","nBitsTotal","nBitsLeft","nBitsTotalH","floor","nBitsTotalL","H_i","7","toObject","val","TypeError","Object","shouldUseNative","assign","test1","getOwnPropertyNames","test2","order2","test3","split","forEach","letter","keys","propIsEnumerable","propertyIsEnumerable","target","source","from","symbols","to","getOwnPropertySymbols","8","hmacMd5","h","base64","success","state","timerId","onsuccess","fail","reason","onfail","send","request","onSuccess","rtm","_unsafeSend","pdu","action","endsWith","authenticate","nonce","roleSecret","body","method","AUTH_METHOD","credentials","bind","handshake","role","roleSecretAuthProvider","opts","defaults","objectAssign","handshakeReply","crypto-js/enc-base64","crypto-js/hmac-md5","object-assign","9","logger","hasConsole","console","log","debugMode","DEBUG_SATORI_SDK","toLowerCase","DEBUG","error","stack","warn","debug","10","cMap","Map","storage","values","size","set","value","index","_index","get","clear","11","Observer","handlers","fn","filter","item","fire","fns","shift","./logger.js","12","endpoint","appkey","options","minReconnectInterval","maxReconnectInterval","heartbeatInterval","heartbeatEnabled","highWaterMark","lowWaterMark","checkWritabilityInterval","_appendVersion","reconnectCount","lastId","ws","reconnectTimer","subscriptions","ackCallbacks","CMap","maskMessage","_isEndpointSecure","_initHeartbeatInterval","writable","_initWritableState","_initConnectionFSM","W3CWebSocket","Subscription","auth","RTM_VER","STOPPED","CONNECTING","CONNECTED","AWAITING","STATES","SubscriptionMode","RELIABLE","trackPosition","fastForward","SIMPLE","ADVANCED","start","stop","restart","isStopped","isConnected","getSubscription","subscriptionId","subscribe","channelOrSubId","mode","bodyOpts","subscription","containsKeys","reduce","acc","k","modeMandatoryKeys","subscribePdu","_nextId","_send","sp","onPdu","resubscribe","onCompleted","prevSub","newSub","unsubscribe","onAck","sub","onUnsubscribed","unsubscribeReplyPdu","isSubscribed","unsubscribePdu","publish","channel","command","read","onAckOrOpts","write","search","prefix","heartbeatTimer","interval","pingTimestamp","pongTimestamp","setInterval","_disconnect","Date","now","clearInterval","writableStateTimer","_setWritableState","_checkWritableState","bufferedAmount","newState","_connect","perMessageDeflate","agent","proxyAgent","onopen","onmessage","json","JSON","_recv","onerror","onclose","origPdu","id","ack","startsWith","str","suffix","subscription_id","close","_nextReconnectInterval","THRESHOLD_FAIL_COUNT","jitter","count","pow","_forEachSubscription","_subscribeAll","_disconnectAll","onDisconnect","_enter","_leave","_transition","open","authProvider","events","ev","_safelyCallFSMEvent","ep","ver","versionMatch","match","ret","./auth.js","./map.js","./observer.js","./subscription.js","./websocket.js","13","_opts","fast_forward","position","wasSubscribedAtLeastOnce","_onPosition","_markAsUnsubscribed","14","uri","NativeWebSocket","_global","WebSocket","MozWebSocket"],"mappings":"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","file":"sdk.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.RTM = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],2:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\t        function F() {}\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                F.prototype = this;\n\t                var subtype = new F();\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init')) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var i = 0; i < thatSigBytes; i += 4) {\n\t                    thisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            var r = (function (m_w) {\n\t                var m_w = m_w;\n\t                var m_z = 0x3ade68b1;\n\t                var mask = 0xffffffff;\n\n\t                return function () {\n\t                    m_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\n\t                    m_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\n\t                    var result = ((m_z << 0x10) + m_w) & mask;\n\t                    result /= 0x100000000;\n\t                    result += 0.5;\n\t                    return result * (Math.random() > .5 ? 1 : -1);\n\t                }\n\t            });\n\n\t            for (var i = 0, rcache; i < nBytes; i += 4) {\n\t                var _r = r((rcache || Math.random()) * 0x100000000);\n\n\t                rcache = _r() * 0x3ade67b7;\n\t                words.push((_r() * 0x100000000) | 0);\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                var processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));\n},{}],3:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex != -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            var words = [];\n\t            var nBytes = 0;\n\t            for (var i = 0; i < base64StrLength; i++) {\n\t                if (i % 4) {\n\t                    var bits1 = map.indexOf(base64Str.charAt(i - 1)) << ((i % 4) * 2);\n\t                    var bits2 = map.indexOf(base64Str.charAt(i)) >>> (6 - (i % 4) * 2);\n\t                    var bitsCombined = bits1 | bits2;\n\t                    words[nBytes >>> 2] |= (bitsCombined) << (24 - (nBytes % 4) * 8);\n\t                    nBytes++;\n\t                }\n\t            }\n\n\t            return WordArray.create(words, nBytes);\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));\n},{\"./core\":2}],4:[function(require,module,exports){\n;(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./md5\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./md5\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacMD5;\n\n}));\n},{\"./core\":2,\"./hmac\":5,\"./md5\":6}],5:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));\n},{\"./core\":2}],6:[function(require,module,exports){\n;(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working varialbes\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));\n},{\"./core\":2}],7:[function(require,module,exports){\n'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],8:[function(require,module,exports){\nvar hmac = require('crypto-js/hmac-md5');\nvar base64 = require('crypto-js/enc-base64');\nvar objectAssign = require('object-assign');\n\nvar AUTH_METHOD = 'role_secret';\n\nfunction hmacMd5(message, key) {\n  var h = hmac(message, key);\n  return base64.stringify(h);\n}\n\nfunction success(state) {\n  clearTimeout(state.timerId);\n  state.onsuccess();\n}\n\nfunction fail(state, reason) {\n  clearTimeout(state.timerId);\n  state.onfail(reason);\n}\n\nfunction send(request, state, onSuccess) {\n  state.rtm._unsafeSend(request, function (pdu) {\n    try {\n      if (pdu.action.endsWith('/ok')) {\n        onSuccess(pdu);\n      } else {\n        fail(state, pdu);\n      }\n    } catch (e) {\n      fail(state, e);\n    }\n  });\n}\n\nfunction authenticate(state, nonce) {\n  var hash = hmacMd5(nonce, state.roleSecret);\n  var request = {\n    action: 'auth/authenticate',\n    body: {\n      method: AUTH_METHOD,\n      credentials: { hash: hash },\n    },\n  };\n  send(request, state, success.bind(null, state));\n}\n\nfunction handshake(state) {\n  var request = {\n    action: 'auth/handshake',\n    body: {\n      method: AUTH_METHOD,\n      data: { role: state.role },\n    },\n  };\n  send(request, state, function (pdu) {\n    var nonce = pdu.body.data.nonce;\n    authenticate(state, nonce);\n  });\n}\n\nfunction roleSecretAuthProvider(role, roleSecret, opts) {\n  var defaults = { timeout: 30000 };\n  if (typeof role !== 'string') {\n    throw new TypeError('\"role\" is missing or invalid');\n  }\n  if (typeof roleSecret !== 'string') {\n    throw new TypeError('\"roleSecret\" is missing or invalid');\n  }\n  return function (rtm, onsuccess, onfail) {\n    var state = objectAssign(defaults, opts, {\n      rtm: rtm,\n      role: role,\n      handshakeReply: null,\n      onsuccess: onsuccess,\n      onfail: onfail,\n      roleSecret: roleSecret,\n    });\n\n    var timerId = setTimeout(function () {\n      fail(state, new Error('authentication timeout'));\n    }, state.timeout);\n    state.timerId = timerId;\n\n    handshake(state);\n  };\n}\n\nmodule.exports = {\n  hmacMd5: hmacMd5,\n  roleSecretAuthProvider: roleSecretAuthProvider,\n};\n\n},{\"crypto-js/enc-base64\":3,\"crypto-js/hmac-md5\":4,\"object-assign\":7}],9:[function(require,module,exports){\n(function (process){\n/* eslint-disable no-console */\n\nvar logger;\nvar hasConsole = console && console.log;\nvar debugMode = false;\n\nif (typeof process !== 'undefined' && 'DEBUG_SATORI_SDK' in process.env) {\n  debugMode = process.env.DEBUG_SATORI_SDK.toLowerCase() === 'true';\n}\n\nlogger = {\n  DEBUG: debugMode,\n  error: function (error) {\n    if (hasConsole) {\n      console.log.apply(console, arguments);\n      if (error.stack) {\n        console.log(error.stack);\n      }\n    }\n  },\n  warn: function () {\n    if (hasConsole) {\n      console.warn.apply(console, arguments);\n    }\n  },\n  debug: function () {\n    if (logger.DEBUG && hasConsole) {\n      console.log.apply(console, arguments);\n    }\n  },\n};\n\nmodule.exports = logger;\n\n}).call(this,require('_process'))\n},{\"_process\":1}],10:[function(require,module,exports){\nvar cMap;\n\nif (typeof (Map) !== 'undefined' && 'forEach' in Map.prototype) {\n  module.exports = Map;\n} else {\n  cMap = function () {\n    this.storage = {\n      keys: [],\n      values: [],\n    };\n    this.size = 0;\n  };\n\n  /**\n   * Sets a value for the specified key.\n   *\n   * @param {string} key - Key value.\n   * @param {any} value - Stored value.\n   *\n   * @return {void}\n   */\n  cMap.prototype.set = function (key, value) {\n    var index = this._index(key);\n    if (index >= 0) {\n      this.storage.values[index] = value;\n    } else {\n      this.storage.keys.push(key);\n      this.storage.values.push(value);\n    }\n\n    this.size = this.storage.keys.length;\n  };\n\n  /**\n   * Gets the value for specified key\n   *\n   * @param {string} key - Key value.\n   *\n   * @return {any} if key exists; {undefined} otherwise.\n   */\n  cMap.prototype.get = function (key) {\n    var index = this._index(key);\n\n    return index >= 0 ? this.storage.values[index] : undefined;\n  };\n\n  /**\n   * Deletes the key and the associated key value.\n   *\n   * @param {string} key - Key value to delete.\n   *\n   * @return {void}\n   */\n  cMap.prototype.delete = function (key) {\n    var index = this._index(key);\n    if (index >= 0) {\n      this.storage.keys.splice(index, 1);\n      this.storage.values.splice(index, 1);\n    }\n\n    this.size = this.storage.keys.length;\n  };\n\n  /**\n   * Clears Map values.\n   *\n   * @return {void}\n   */\n  cMap.prototype.clear = function () {\n    this.storage.keys = [];\n    this.storage.values = [];\n\n    this.size = this.storage.keys.length;\n  };\n\n  cMap.prototype._index = function (key) {\n    return this.storage.keys.indexOf(key);\n  };\n\n  module.exports = cMap;\n}\n\n},{}],11:[function(require,module,exports){\nvar logger = require('./logger.js');\n\n/**\n * Creates an observer instance.\n * @class\n */\nfunction Observer() {\n  this.handlers = {};\n}\n\nObserver.prototype = {\n  /**\n   * Attaches an event handler function for the event specified in <code>name</code>.\n   *\n   * The event is usually related to a client or subscription state. It may also be an event\n   * that occurs when the client or subscription receives information from RTM. For example, the\n   * the following are [RTM]{@link RTM} client events:\n   * <ul>\n   *     <li><code>data:</code> The client received a PDU from RTM.</li>\n   *     <li><code>enter-connected:</code> The client is now connected to RTM.</li>\n   * </ul>\n   * A possible event for a [Subscription]{@link Subscription} is <code>enter-subscribed</code>.\n   *\n   * The <code>fn</code> parameter is a function that's invoked when the event occurs. The PDU for\n   * the event is passed to this function.\n   *\n   * @param {string} name - event name\n   *\n   * @param {function} fn - event handler function\n   *\n   * @return {void}\n   */\n  on: function (name, fn) {\n    if (!(name in this.handlers)) {\n      this.handlers[name] = [];\n    }\n    this.handlers[name].push(fn);\n  },\n\n  /**\n   * Removes an event handler.\n   *\n   * The event specified in <code>name</code> is an [RTM]{@link RTM} or\n   * [Subscription]{@link Subscription} event that has an attached event handler function\n   * (see the <code>on()</code> function).\n   *\n   * The Protocol Data Unit (PDU) for the event is passed to the\n   * <code>fn</code> function parameter.\n   *\n   * @param {string} name - event name\n   *\n   * @param {function} fn - event handler function\n   *\n   * @return {void}\n   */\n  off: function (name, fn) {\n    if (!(name in this.handlers)) {\n      return;\n    }\n    this.handlers[name] = this.handlers[name].filter(function (item) {\n      return item !== fn;\n    });\n  },\n\n  /**\n   * Executes all handlers attached for the specified event type.\n   *\n   * The event specified in <code>name</code> is an [RTM]{@link RTM} or\n   * [Subscription]{@link Subscription} event that has an attached event handler function\n   * (see the <code>on()</code> function).\n   *\n   * @param {string} name - name of an event that has attached handlers\n   * @param {...Object} args - event arguments.\n   *\n   * @return {void}\n   */\n  fire: function () {\n    var name;\n    var fns;\n    var i;\n    var len = arguments.length;\n    // Copy arguments to solve 'Not optimized: Bad value context for arguments value'\n    // See https://github.com/GoogleChrome/devtools-docs/issues/53#issuecomment-51941358\n    var args = new Array(len);\n    for (i = 0; i < len; i += 1) {\n      args[i] = arguments[i];\n    }\n    name = args.shift();\n\n    fns = this.handlers[name] || [];\n    fns.forEach(function (fn) {\n      try {\n        fn.apply(null, args);\n      } catch (e) {\n        logger.error(e);\n      }\n    });\n  },\n};\n\nmodule.exports = Observer;\n\n},{\"./logger.js\":9}],12:[function(require,module,exports){\nvar W3CWebSocket = require('./websocket.js');\nvar Observer = require('./observer.js');\nvar Subscription = require('./subscription.js');\nvar logger = require('./logger.js');\nvar auth = require('./auth.js');\nvar objectAssign = require('object-assign');\nvar CMap = require('./map.js');\n\nvar RTM_VER = 'v2';\nvar STOPPED = 'stopped';\nvar CONNECTING = 'connecting';\nvar CONNECTED = 'connected';\nvar AWAITING = 'awaiting';\nvar STATES = {};\n\n\n/**\n * Create a RTM client instance.\n * @class\n * @augments Observer\n *\n * @description\n * An RTM client is the main entry point for accessing RTM.\n *\n * To connect a client to RTM, you must call [RTM.start()]{@link RTM#start}. The RTM SDK attempts\n * to reconnect to RTM if the connection to RTM fails for any reason.\n *\n * A client instance can be in one of the following connection states:\n *  - <strong>stopped:</strong> You called [RTM.stop()]{@link RTM#stop} or RTM disconnected and\n *    hasn't yet reconnected.\n *  - <strong>connecting:</strong> You called [RTM.start()]{@link RTM#start} or the client is\n *    trying to reconnect to RTM.\n *  - <strong>connected:</strong> The client is connected to RTM.\n *  - <strong>awaiting:</strong> The client disconnected and is waiting the specified time period\n *    before reconnecting. See the <code>minReconnectInterval</code> and\n *    <code>maxReconnectInterval</code> options.\n *\n * For each state, an event occurs when the client enters or leaves the state. Call\n * [RTM.on(name, fn)]{@link RTM#on} method to add code that's executed when the client\n * transitions into or out of a state. The syntax for the value of <code>name</code> is\n *\n * <code><strong>[ enter- | leave- ][ stopped | connecting | connected | awaiting ]</strong></code>\n *\n * For example, <code>RTM.on(\"enter-connected\", myFunction)</code>. The next example also shows you\n * how to call <code>RTM.on()</code>\n *\n * @example\n * // Creates an RTM client\n * var rtm = new RTM('YOUR_ENDPOINT', 'YOUR_APPKEY');\n *\n * // Creates a new subscription to the channel named 'your-channel'\n* var subscription = rtm.subscribe('your-channel', RTM.SubscriptionMode.SIMPLE);\n *\n * // Adds a subscription event listener that logs messages to the console as they arrive.\n * // The subscription receives all messages in the subscribed channel\n * subscription.on('rtm/subscription/data', function (pdu) {\n *     pdu.body.messages.forEach(console.log);\n * });\n *\n * // Sets a connection event listener that publishes a message to the channel named\n * // <code>your-channel</code>\n * // when the client is connected to RTM (the client enters the 'connected' state)\n * rtm.on('enter-connected', function () {\n *   rtm.publish('your-channel', {key: 'value'});\n * });\n *\n * // Sets a client event listener that checks incoming messages to see if they indicate an error.\n * // <code>rtm.on()</code> is called for all incoming messages.\n * rtm.on('data', function (pdu) {\n *   if (pdu.action.endsWith('/error')) {\n *     rtm.restart();\n *   }\n * });\n *\n * // Starts the client\n * rtm.start();\n *\n * @param {string} endpoint - WebSocket endpoint for RTM\n * Available from the Dev Portal.\n *\n * @param {string} appkey - appkey used to access RTM\n * Available from the Dev Portal.\n *\n * @param {object} opts - additional RTM client parameters\n *\n * @param {integer} [opts.minReconnectInterval=1000] - minimum\n * time period, in milliseconds, to wait between reconnection attempts\n *\n * @param {integer} [opts.maxReconnectInterval=120000] - maximum\n * time period, in milliseconds, to wait between reconnection attempts\n *\n * @param {boolean} [opts.heartbeatEnabled=true] - enables periodic\n * heartbeat monitoring for the WebSocket connection\n *\n * @param {object} [opts.authProvider] - object that manages authentication for the client.\n * See {@link auth.js}\n *\n * @param {integer} [opts.heartbeatInterval=60000] - interval,\n * in milliseconds, to wait between heartbeat messages\n * @param {integer} [opts.highWaterMark=4194304] - 4MB. High water mark in bytes. If the number\n * of bytes in the WebSocket write buffer exceeds this value,\n * [writeable]{@link RTM#writeable} is set to <code>false</code>.\n *\n * @param {integer} [opts.lowWaterMark=2097152] - 2MB. Low water mark, in bytes. If the\n * Websocket write buffer rises above <code>highWaterMark</code> and then drops below\n * <code>lowWaterMark</code>, [writeable]{@link RTM#writeable} is set to <code>true</code>.\n *\n * @param {integer} [opts.checkWritabilityInterval=100] - Interval,\n * in milliseconds, between checks of the queue length and updates of the\n * [writeable]{@link RTM#writeable} property if necessary.\n *\n * @param {object} [opts.proxyAgent] - proxy server agent.\n * A custom http.Agent implementation like:\n * https-proxy-agent https://github.com/TooTallNate/node-https-proxy-agent#ws-websocket-connection-example\n * socks-proxy-agent https://github.com/TooTallNate/node-socks-proxy-agent#ws-websocket-connection-example\n *\n * @property {boolean} writable - A general indicator of the status of the write buffer.\n * <code>true</code> indicates that the write buffer is shrinking, while <code>false</code>\n * indicates that the write buffer is growing. Test <code>writable</code> to see whether you should\n * continue to write or pause writing.\n *\n * @throws {TypeError} <code>TypeError</code> is thrown if mandatory parameters are\n * missing or invalid.\n */\nfunction RTM(endpoint, appkey, opts) {\n  if (typeof endpoint !== 'string') {\n    throw new TypeError('\"endpoint\" is missing or invalid');\n  }\n  if (typeof appkey !== 'string') {\n    throw new TypeError('\"appkey\" is missing or invalid');\n  }\n  // superclass constructor call\n  Observer.call(this);\n  this.options = objectAssign({\n    minReconnectInterval: 1000,\n    maxReconnectInterval: 120000,\n    heartbeatInterval: 60000,\n    heartbeatEnabled: true,\n    highWaterMark: 1024 * 1024 * 4, // 4Mb is the maximum queue length. Writable flag sets to false\n    lowWaterMark: 1024 * 1024 * 2, // 2Mb unblock the writing. Writable flag sets to true\n    checkWritabilityInterval: 100,\n  }, opts);\n  this.endpoint = this._appendVersion(endpoint) + '?appkey=' + appkey;\n  this.reconnectCount = 0;\n  this.lastId = 0;\n  this.ws = null;\n  this.reconnectTimer = null;\n  this.subscriptions = {};\n  this.ackCallbacks = new CMap();\n  this.maskMessage = !this._isEndpointSecure(endpoint);\n\n  if (this.options.heartbeatEnabled) {\n    this._initHeartbeatInterval();\n  }\n  this.writable = true;\n  this._initWritableState();\n  this._initConnectionFSM();\n  this.on('error', logger.error);\n}\n\nRTM.logger = logger;\n\n/**\n * @typedef SubscriptionMode\n * @type {object}\n *\n * @property {boolean} trackPosition\n * Tracks the stream position received from RTM. RTM includes the <code>position</code>\n * parameter in responses to publish and subscribe requests and in subscription data messages.\n * The SDK can attempt to resubscribe to the channel data stream from this position.\n *\n * @property {boolean} fastForward\n * If necessary, RTM fast-forwards the subscription when the SDK resubscribes to a channel.\n *\n * To learn more about position tracking and fast-forwarding, see the sections \"... with position\"\n * and \"... with fast-forward (advanced)\" in the chapter \"Subscribing\" in <em>Satori Docs</em>.\n */\n\n/**\n * Subscription modes.\n *\n * @namespace\n * @readonly\n */\n\nRTM.SubscriptionMode = {\n  /**\n   *\n   * RTM tracks the <code>position</code> value for the subscription and\n   * tries to use it when resubscribing after the connection drops and the client reconnects.\n   * If the <code>position</code> points to an expired message, RTM fast-forwards to the earliest\n   * <code>position</code> that points to a non-expired message.\n   *\n   * This mode reliably goes to the next available message when RTM is resubscribing. However,\n   * RTM always fast-forwards the subscription if necessary, so it never returns an error for an\n   * 'out-of-sync' condition.\n   *\n   * To learn more about position tracking and fast-forwarding, see the sections \"... with position\"\n   * and \"... with fast-forward (advanced)\" in the chapter \"Subscribing\" in <em>Satori Docs</em>.\n   *\n   * @type {SubscriptionMode}\n   * @static\n   * @constant\n   * @readonly\n   */\n  RELIABLE: {\n    trackPosition: true,\n    fastForward: true,\n  },\n\n  /**\n   *\n   * RTM doesn't track the <code>position</code> value for the\n   * subscription. Instead, when RTM resubscribes following a reconnection, it fast-forwards to\n   * the earliest <code>position</code> that points to a non-expired message.\n   *\n   * Because RTM always fast-forwards the subscription, it never returns an error for an\n   * 'out-of-sync' condition.\n   *\n   * To learn more about position tracking and fast-forwarding, see the sections \"... with position\"\n   * and \"... with fast-forward (advanced)\" in the chapter \"Subscribing\" in <em>Satori Docs</em>.\n   *\n   * @type {SubscriptionMode}\n   * @static\n   * @constant\n   * @readonly\n   */\n  SIMPLE: {\n    trackPosition: false,\n    fastForward: true,\n  },\n\n  /**\n   *\n   * RTM always tracks the <code>position</code> value for the subscription and tries to\n   * use it when resubscribing after the connection drops and the client reconnects.\n   *\n   * If the position points to an expired message, the resubscription attempt fails. RTM sends an\n   * <code>expired_position</code> error and stops the subscription process.\n   *\n   * If the subscription is active, and RTM detects that the current <code>position</code> value\n   * points to an expired message, the subscription is in an 'out-of-sync' state. In this case,\n   * RTM sends an <code>out_of_sync</code> error and unsubscribes you.\n   *\n   * To learn more about position tracking and fast-forwarding, see the sections \"... with position\"\n   * and \"... with fast-forward (advanced)\" in the chapter \"Subscribing\" in <em>Satori Docs</em>.\n   *\n   * @type {SubscriptionMode}\n   * @static\n   * @constant\n   * @readonly\n   */\n  ADVANCED: {\n    trackPosition: true,\n    fastForward: false,\n  },\n};\n\n/**\n * Creates a role-based authentication provider for the client\n * <p>\n * The role-based authentication method is a two-step authentication process based on the HMAC\n * process, using the MD5 hashing routine:\n * <ul>\n * <li>The client obtains a nonce from the server in a handshake request.</li>\n * <li>The client then sends an authorization request with its role secret key hashed with the\n * received nonce.</li>\n * </ul>\n * <p>\n * To get a role secret key for your application, go to the Dev Portal.\n *\n * @param {string} role - role name set in the Dev Portal\n *\n * @param {string} roleSecret - role secret key\n *\n * @param {object} opts - additional authentication options\n *\n * @param {integer} [opts.timeout=30000] - amount of time, in milliseconds, before the\n * authentication operation times out\n *\n * @throws {TypeError} thrown if mandatory parameters are missing or invalid\n *\n * @return {function} authentication provider for the role-based authentication method\n */\nRTM.roleSecretAuthProvider = function (role, roleSecret, opts) {\n  return auth.roleSecretAuthProvider(role, roleSecret, opts);\n};\nRTM.prototype = Object.create(Observer.prototype);\n\n/**\n * Starts the client.\n *\n * The client begins to establish the WebSocket connection\n * to RTM and then tracks the state of the connection. If the WebSocket\n * connection drops for any reason, the JavaScript SDK attempts to reconnect.\n *\n *\n * Use [RTM.on(name, fn)][RTM.on()]{@link RTM#on} to define application functionality,\n * for example, when the application enters or leaves the\n * <code>connecting</code> or <code>connected</code> states.\n *\n * @return {void}\n */\nRTM.prototype.start = function () {\n  if (STOPPED !== this.state) {\n    throw new Error('RTM is already started');\n  }\n  this.fire('start');\n};\n\n/**\n * Stops the client. The RTM SDK starts to close the WebSocket connection and\n * does not start it again unless you call [RTM.start()]{@link RTM#start}.\n *\n * Use this method to explicitly stop all interaction with RTM.\n *\n * Use [RTM.on(\"enter-stopped\", function())]{@link RTM#on} or\n * [RTM.on(\"leave-stopped\", function())]{@link RTM#on} to\n * provide code that executes when the client enters or leaves the <code>stopped</code> state.\n *\n * @return {void}\n */\nRTM.prototype.stop = function () {\n  if (STOPPED === this.state) {\n    throw new Error('RTM is already stopped');\n  }\n  this.fire('stop');\n};\n\n/**\n * Calls [RTM.stop()]{@link RTM#stop} followed by [RTM.start()]{@link RTM#start] to\n * restart the client. RTM issues events for these client states, which you can handle with code in\n * [RTM.on(name, function())]{@link RTM#on}.\n *\n * @return {void}\n */\nRTM.prototype.restart = function () {\n  this.stop();\n  this.start();\n};\n\n/**\n * Returns <code>true</code> if the RTM client is in the <code>stopped</code> state.\n *\n * @return {boolean} <code>true</code> if the client is in the <code>stopped</code> state,\n * otherwise <code>false</code>\n */\nRTM.prototype.isStopped = function () {\n  return this.state === STOPPED;\n};\n\n/**\n * Returns <code>true</code> if the client is in the <code>connected</code> state.\n *\n * In this state, the WebSocket connection to RTM is established and any requested authentication\n * has completed successfully .\n *\n * @return {boolean} <code>true</code> if the client is in the <code>connected</code> state,\n * otherwise <code>false</code>\n */\nRTM.prototype.isConnected = function () {\n  return this.state === CONNECTED;\n};\n\n/**\n * Returns the existing [Subscription]{@link Subscription} object for the specified subscription id.\n *\n * @param {string} subscriptionId - the id for an existing [Subscription]{@link Subscription} object\n *\n * @throws {TypeError} thrown if <code>subscriptionId</code> is missing, invalid, or if a\n * [Subscription]{@link Subscription} object with that id doesn't exist.\n *\n * @return {Subscription} the [Subscription]{@link Subscription} object\n */\nRTM.prototype.getSubscription = function (subscriptionId) {\n  if (typeof subscriptionId !== 'string') {\n    throw new TypeError('\"subscriptionId\" is missing or invalid');\n  }\n  return this.subscriptions[subscriptionId];\n};\n\n/**\n * Creates a subscription to the specified channel.\n *\n * When you create a subscription, you can specify additional properties.\n * For example, you can add a streamview, or you can specify the\n * what the SDK does when it resubscribes after a reconnection.\n *\n * @param {string} channelOrSubId - string containing a channel id or name. If you do not\n * specify the <code>filter</code> parameter, specify the channel name. Otherwise,\n * specify a unique identifier for your subscription to this channel.\n *\n * @param {RTM.SubscriptionMode} mode\n * subscription mode. This mode determines the behaviour of the RTM SDK and RTM when resubscribing\n * after a reconnection. See [SubscriptionMode]{@link SubscriptionMode}.\n *\n * @param {object} [bodyOpts={}]\n * additional options for the subscription\n *\n *\n * @throws {TypeError} thrown if mandatory parameters are missing or invalid.\n *\n * @return {Subscription} - subscription object\n *\n * @example\n * // Creates a new RTM client\n * var rtm = new RTM('YOUR_ENDPOINT', 'YOUR_APPKEY');\n *\n * // Creates a subscription with the name 'your-channel'\n * var subscription = rtm.subscribe('your-channel', RTM.SubscriptionMode.SIMPLE);\n *\n * // Writes incoming messages to the log\n * subscription.on('rtm/subscription/data', function (pdu) {\n *     pdu.body.messages.forEach(console.log);\n * });\n *\n * // Starts the client\n * rtm.start();\n *\n * @example\n * // Creates a new RTM client\n * var rtm = new RTM('YOUR_ENDPOINT', 'YOUR_APPKEY');\n *\n * // Subscribes to the channel named 'my-channel' using a streamview\n * var subscription = rtm.subscribe('my-filter', RTM.SubscriptionMode.SIMPLE, {\n *   filter: 'SELECT * FROM my-channel WHERE object.param >= 1 OR object.id == 0',\n * });\n *\n * // Writes incoming messages to the log\n * subscription.on('rtm/subscription/data', function (pdu) {\n *   pdu.body.messages.forEach(console.log);\n * });\n *\n * // Sets a client event listener, for unsolicited subscription PDUs, that reacts to an error PDU\n * // by restarting the client connection. The PDU is passed as a parameter.\n * rtm.on('data', function (pdu) {\n *   if (pdu.action.endsWith('/error')) {\n *     rtm.restart();\n *   }\n *\n * rtm.start();\n *\n * @see {@link RTM.SubscriptionMode.SIMPLE}\n * @see {@link RTM.SubscriptionMode.RELIABLE}\n * @see {@link RTM.SubscriptionMode.ADVANCED}\n */\nRTM.prototype.subscribe = function (channelOrSubId, mode, bodyOpts) {\n  var containsKeys = function (map, keys) {\n    return keys.reduce(function (acc, k) {\n      return acc && {}.hasOwnProperty.call(map, k);\n    }, true);\n  };\n  var subscription;\n  var pdu;\n  var opts;\n  var modeMandatoryKeys = ['fastForward', 'trackPosition'];\n\n  if (typeof channelOrSubId !== 'string') {\n    throw new TypeError('\"channelOrSubId\" is missing or invalid');\n  }\n\n  if (!(typeof mode === 'object') || !containsKeys(mode, modeMandatoryKeys)) {\n    throw new TypeError('Subscription mode has incorrect value: ' + mode + '\\n' +\n                        'Mode should contains the following mandatory fields: ' + modeMandatoryKeys.join(', ') + '\\n' +\n                        'See also: RTM.SubscriptionMode.SIMPLE, RTM.SubscriptionMode.ADVANCED, RTM.SubscriptionMode.RELIABLE');\n  }\n\n  if (this.subscriptions[channelOrSubId]) {\n    throw new Error('Cannot create subscription ' + subscription + ' twice');\n  }\n\n  opts = objectAssign({}, mode, { bodyOpts: bodyOpts });\n  subscription = new Subscription(channelOrSubId, opts);\n  this.subscriptions[channelOrSubId] = subscription;\n  if (this.isConnected()) {\n    pdu = subscription.subscribePdu(this._nextId());\n    this._send(pdu, function (sp) {\n      subscription.onPdu(sp);\n    });\n  }\n  return subscription;\n};\n\n/**\n * Updates an existing [Subscription]{@link Subscription} object. Existing\n * [Subscription]{@link Subscription} event handlers are copied to the updated object.\n *\n * Use this method to change an existing subscription. For example, use it to add or change a\n * streamview.\n *\n * @param {string} channelOrSubId - subscription id or channel name for\n * the existing subscription\n *\n * @param {Object} opts\n * Properties for the updated <code>Subscription</code> object. See\n * [RTM.subscribe(channelOrSubId, opts)]{@link #subscribe} for the supported property names.\n *\n * @param {Function} [onCompleted]\n * function to execute on the updated <code>Subscription</code> object\n *\n * @throws {TypeError} thrown if mandatory parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.resubscribe = function (channelOrSubId, mode, bodyOpts, onCompleted) {\n  var self = this;\n  var prevSub;\n  var newSub;\n  if (typeof channelOrSubId !== 'string') {\n    throw new TypeError('\"channelOrSubId\" is missing or invalid');\n  }\n  prevSub = self.subscriptions[channelOrSubId];\n  self.unsubscribe(channelOrSubId, function () {\n    newSub = self.subscribe(channelOrSubId, mode, bodyOpts);\n    newSub.handlers = prevSub.handlers;\n    if (onCompleted) {\n      onCompleted(newSub);\n    }\n  });\n};\n\n\n/**\n * Removes the specified subscription.\n *\n * @param {string} subscriptionId - Subscription id or channel name.\n *\n * @param {Function} [onAck]\n * Callback function that's invoked when RTM responds to the unsubscribe request. RTM passes the\n * response PDU to this function. If you don't specify <code>onAck</code>, RTM doesn't send a\n * response PDU.\n *\n * @throws {TypeError} thrown if required parameters are missing or invalid\n *\n * @return {void}\n */\nRTM.prototype.unsubscribe = function (subscriptionId, onAck) {\n  var self = this;\n  var sub;\n  var onUnsubscribed;\n  var pdu;\n  if (typeof subscriptionId !== 'string') {\n    throw new TypeError('\"subscriptionId\" is missing or invalid');\n  }\n  sub = self.subscriptions[subscriptionId];\n  if (!sub) {\n    throw new Error('Unknown subscription ' + subscriptionId);\n  }\n\n  // This method is called when rtm/unsubscribe/(ok|error) is returned.\n  // If client is disconnected this method is called immediately without argument.\n  onUnsubscribed = function (unsubscribeReplyPdu) {\n    if (unsubscribeReplyPdu) {\n      sub.onPdu(unsubscribeReplyPdu);\n    }\n    delete self.subscriptions[subscriptionId];\n    if (onAck) {\n      onAck(unsubscribeReplyPdu);\n    }\n  };\n  if (sub.isSubscribed) {\n    pdu = sub.unsubscribePdu(self._nextId());\n    self._send(pdu, onUnsubscribed);\n  } else {\n    onUnsubscribed();\n  }\n};\n\n/**\n * Publishes a message to a channel. The client must be connected.\n *\n * @example\n * // Publishes to the channel named \"channel\", and provides a callback function that's invoked when\n * // RTM responds to the request. If the PDU \"action\" value doesn't end with \"ok\", the function\n * // logs an error.\n * rtm.publish('channel', {key: 'value'}, function (pdu) {\n *   if (!pdu.action.endsWith('/ok')) {\n *     console.log('something went wrong');\n *   }\n * });\n *\n * @param {string} channel - channel name\n *\n * @param {JSON} message\n * JSON containing the message to publish\n *\n * @param {Function} [onAck]\n * Callback function that's invoked when RTM responds to the publish request. RTM passes the\n * response PDU to this function. If you don't specify <code>onAck</code>, RTM doesn't send a\n * response PDU.\n *\n * @throws {TypeError} thrown if required parameters are missing or invalid\n *\n * @return {void}\n */\nRTM.prototype.publish = function (channel, message, onAck) {\n  var command;\n  if (typeof channel !== 'string') {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  if (typeof message === 'undefined') {\n    throw new TypeError('\"message\" is missing');\n  }\n  command = {\n    action: 'rtm/publish',\n    body: {\n      channel: channel,\n      message: message,\n    },\n  };\n  return this._send(command, onAck);\n};\n\n/**\n * Reads the latest message written to a specific channel, as a Protocol\n * Data Unit (<strong>PDU</strong>). The client must be connected.\n *\n * @variation 1\n *\n * @param {string} channel - name of the channel to read from\n *\n * @param {Function} [onAck]\n * Callback function that's invoked when RTM responds to the publish request. RTM passes the\n * response PDU to this function. If you don't specify <code>onAck</code>, RTM doesn't send a\n * response PDU.\n *\n * @example\n * // Reads from the channel named 'channel' and prints the response PDU\n * rtm.read('channel', function (pdu) {\n *     console.log(pdu);\n * })\n *\n * @throws {TypeError} thrown if required parameters are missing or invalid\n *\n * @return {void}\n *\n * @also\n *\n * Reads the latest message written to specific channel, as a Protocol\n * Data Unit (<strong>PDU</strong>). The client must be connected.\n *\n * @variation 2\n *\n * @param {string} channel - name of the channel to read from\n *\n * @param {object} [opts={}]\n * Additional options in the read PDU that's sent to RTM in the request.\n * For more information, see the section \"Read PDU\" in the \"RTM API\" chapter of <em>Satori Docs/em>.\n *\n * @param {object} [opts.bodyOpts={}]\n * Additional options in the <code>body</code> element of the read PDU that's sent to\n * RTM in the request.\n *\n * @param {Function} [opts.onAck]\n * Callback function that's invoked when RTM responds to the publish request. RTM passes the\n * response PDU to this function. If you don't specify <code>onAck</code>, RTM doesn't send a\n * response PDU.\n *\n * @example\n * // Reads from the channel named 'channel', starting at the position specified by the\n * // \"position\" key.\n * // Prints the response PDU.\n * rtm.read('channel', {\n *   bodyOpts: { position: '1485444476:0' },\n *   onAck: function (pdu) {\n *     console.log(pdu);\n *   }\n * })\n *\n * @throws {TypeError} thrown if required parameters are missing or invalid\n *\n * @return {void}\n */\nRTM.prototype.read = function (channel, onAckOrOpts) {\n  var command;\n  var opts;\n  if (typeof channel !== 'string') {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  if (typeof onAckOrOpts === 'function') {\n    opts = { onAck: onAckOrOpts };\n  } else {\n    opts = onAckOrOpts;\n  }\n  command = {\n    action: 'rtm/read',\n    body: objectAssign({}, opts.bodyOpts, { channel: channel }),\n  };\n  return this._send(command, opts.onAck);\n};\n\n/**\n * Writes a value to the specified channel. The client must be connected.\n *\n * @param {string} channel - name of the channel to write to\n *\n * @param {JSON} value\n * JSON containing the PDU to write to the channel\n *\n * @param {Function} [onAck]\n * Callback function that's invoked when RTM responds to the publish request. RTM passes the\n * response PDU to this function. If you don't specify <code>onAck</code>, RTM doesn't send a\n * response PDU.\n *\n * @example\n * // Writes the string 'value' to the channel named 'channel' and prints the response PDU.\n * rtm.write('channel', 'value', function (pdu) {\n *     console.log(pdu);\n * })\n *\n * @throws {TypeError} thrown if required parameters are missing or invalid\n *\n * @return {void}\n */\nRTM.prototype.write = function (channel, value, onAck) {\n  var command;\n  if ((typeof channel !== 'string')) {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  if (typeof value === 'undefined') {\n    throw new TypeError('\"value\" is missing or invalid');\n  }\n  command = {\n    action: 'rtm/write',\n    body: { channel: channel, message: value },\n  };\n  return this._send(command, onAck);\n};\n\n/**\n * Deletes the value for the associated channel. The [RTM]{@link RTM} client must be connected.\n *\n * @param {string} channel - Channel name.\n *\n * @param {Function} [onAck]\n * Callback function that's invoked when RTM responds to the publish request. RTM passes the\n * response PDU to this function. If you don't specify <code>onAck</code>, RTM doesn't send a\n * response PDU.\n *\n * @example\n * rtm.delete('channel', function (pdu) {\n *     console.log(pdu);\n * })\n *\n * @throws {TypeError} thrown if required parameters are missing or invalid\n *\n * @return {void}\n */\nRTM.prototype.delete = function (channel, onAck) {\n  var command;\n  if (typeof channel !== 'string') {\n    throw new TypeError('\"channel\" is missing or invalid');\n  }\n  command = {\n    action: 'rtm/delete',\n    body: { channel: channel },\n  };\n  return this._send(command, onAck);\n};\n\n/**\n * Performs a channel search for a given user-defined prefix. This method passes\n * replies to the callback. The [RTM]{@link RTM} client must be connected.\n *\n * RTM may send multiple responses to the same search request: zero or\n * more search result PDUs with an action of <code>rtm/search/data</code>\n * (depending on the results of the search). Each channel found is only sent\n * once. After the search result PDUs, RTM follows with a positive response PDU:\n * <code>rtm/search/ok</code>.\n *\n * Otherwise, RTM sends an error PDU with an action of <code>rtm/search/error</code>.\n *\n * @param {string} prefix - Channel prefix.\n *\n * @param {Function} [onAck]\n * Function to attach and execute on the response PDU from\n * RTM. The response PDU is passed as a parameter to this function.\n * RTM does not send a response PDU if a callback is not specified.\n *\n * @example\n * var channels = [];\n * rtm.search('ch', function (pdu) {\n *     channels = channels.concat(pdu.body.channels);\n *     if (pdu.action === 'rtm/search/ok') {\n *       console.log(channels);\n *     }\n * })\n *\n * @throws {TypeError} <code>TypeError</code> indicates that mandatory\n * parameters are missing or invalid.\n *\n * @return {void}\n */\nRTM.prototype.search = function (prefix, onAck) {\n  var command;\n  if (typeof prefix !== 'string') {\n    throw new TypeError('\"prefix\" is missing or invalid');\n  }\n  command = {\n    action: 'rtm/search',\n    body: { prefix: prefix },\n  };\n  return this._send(command, onAck);\n};\n\n// Private methods\n\nRTM.prototype._initHeartbeatInterval = function () {\n  var self = this;\n  var heartbeatTimer;\n  var interval = this.options.heartbeatInterval;\n\n  this.on('open', function () {\n    var pingTimestamp = 0;\n    var pongTimestamp = 0;\n    heartbeatTimer = setInterval(function () {\n      if (pongTimestamp < pingTimestamp) {\n        self._disconnect();\n        return;\n      }\n      pingTimestamp = Date.now();\n      self.publish('$heartbeat', '', function () {\n        pongTimestamp = Date.now();\n      });\n    }, interval);\n  });\n\n  this.on('close', function () {\n    clearInterval(heartbeatTimer);\n  });\n};\n\nRTM.prototype._initWritableState = function () {\n  var self = this;\n  var writableStateTimer;\n  var interval = this.options.checkWritabilityInterval;\n\n  this.on('open', function () {\n    self._setWritableState(true);\n    writableStateTimer = setInterval(function () {\n      self._checkWritableState();\n    }, interval);\n  });\n\n  this.on('close', function () {\n    clearInterval(writableStateTimer);\n    self._setWritableState(false);\n  });\n};\n\nRTM.prototype._checkWritableState = function () {\n  if (this.writable && this.ws.bufferedAmount > this.options.highWaterMark) {\n    this._setWritableState(false);\n  } else if (!this.writable && this.ws.bufferedAmount < this.options.lowWaterMark) {\n    this._setWritableState(true);\n  }\n};\n\nRTM.prototype._setWritableState = function (newState) {\n  if (this.writable !== newState) {\n    this.writable = newState;\n    this.fire('change-writability', this.writable);\n  }\n};\n\nRTM.prototype._connect = function () {\n  var self = this;\n  var ws;\n  logger.debug('Connecting to', this.endpoint);\n  if ('proxyAgent' in this.options) {\n    logger.debug('   (using proxy agent)');\n  }\n  ws = this.ws = new W3CWebSocket(this.endpoint, [], {\n    perMessageDeflate: false,\n    agent: this.options.proxyAgent,\n  });\n  ws.onopen = function () {\n    self.fire('open');\n  };\n  ws.onmessage = function (message) {\n    var json;\n    try {\n      logger.debug('recv<', message.data);\n      json = JSON.parse(message.data);\n      self._recv(json);\n      self.fire('data', json);\n    } catch (error) {\n      self.fire('error', error);\n    }\n  };\n  ws.onerror = function (error) {\n    self.fire('error', error);\n  };\n  ws.onclose = function () {\n    if (self.ws === ws) {\n      self.ws = null;\n      self.fire('close');\n    }\n  };\n};\n\nRTM.prototype._send = function (pdu, onAck) {\n  if (!this.isConnected()) {\n    throw new Error('Client is not connected');\n  }\n  return this._unsafeSend(pdu, onAck);\n};\n\nRTM.prototype._unsafeSend = function (origPdu, onAck) {\n  var pdu = objectAssign({}, origPdu);\n  var json;\n  if (onAck) {\n    pdu.id = 'id' in pdu ? pdu.id : this._nextId();\n    this.ackCallbacks.set(pdu.id, onAck);\n  }\n  json = JSON.stringify(pdu);\n  logger.debug('send>', json);\n  try {\n    this.ws.send(json, {\n      mask: this.maskMessage,\n    });\n  } catch (error) {\n    this.fire('error', error);\n  }\n  this._checkWritableState();\n};\n\nRTM.prototype._recv = function (pdu) {\n  var subscriptionId;\n  var subscription;\n  var ack;\n  // standalone versions because `startsWith` && `endsWith` appeared in ES6 only\n  var startsWith = function (str, prefix) {\n    return str.substr(0, prefix.length) === prefix;\n  };\n  var endsWith = function (str, suffix) {\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n  };\n  if (pdu.body && ('subscription_id' in pdu.body) && startsWith(pdu.action, 'rtm/subscription/')) {\n    subscriptionId = pdu.body.subscription_id;\n    subscription = this.subscriptions[subscriptionId];\n    if (subscription) {\n      subscription.onPdu(pdu);\n    }\n  }\n  if ('id' in pdu) {\n    ack = this.ackCallbacks.get(pdu.id);\n    if (ack) {\n      if (!endsWith(pdu.action, '/data')) {\n        this.ackCallbacks.delete(pdu.id);\n      }\n      ack(pdu);\n    }\n  }\n};\n\nRTM.prototype._disconnect = function () {\n  var ws = this.ws;\n  if (ws) {\n    ws.onclose();\n    ws.onclose = null;\n    ws.close();\n  }\n  this.ackCallbacks.clear();\n};\n\nRTM.prototype._nextId = function () {\n  this.lastId += 1;\n  return this.lastId;\n};\n\nRTM.prototype._nextReconnectInterval = function () {\n  var THRESHOLD_FAIL_COUNT = 30;\n  var minReconnectInterval = this.options.minReconnectInterval;\n  var maxReconnectInterval = this.options.maxReconnectInterval;\n  var jitter = Math.random() * this.options.minReconnectInterval;\n  var count = Math.min(this.reconnectCount, THRESHOLD_FAIL_COUNT);\n  var interval = Math.min(maxReconnectInterval,\n      jitter + (minReconnectInterval * Math.pow(2, count)));\n  return interval;\n};\n\nRTM.prototype._forEachSubscription = function (fn) {\n  var self = this;\n  Object.keys(self.subscriptions).forEach(function (subscriptionId) {\n    if ({}.hasOwnProperty.call(self.subscriptions, subscriptionId)) {\n      fn(subscriptionId, self.subscriptions[subscriptionId]);\n    }\n  });\n};\n\nRTM.prototype._subscribeAll = function () {\n  var self = this;\n  this._forEachSubscription(function (subscriptionId, subscription) {\n    var pdu = subscription.subscribePdu(self._nextId());\n    self._send(pdu, function (sp) {\n      subscription.onPdu(sp);\n    });\n  });\n};\n\nRTM.prototype._disconnectAll = function () {\n  this._forEachSubscription(function (subscriptionId, subscription) {\n    subscription.onDisconnect();\n  });\n};\n\nRTM.prototype._isEndpointSecure = function (endpoint) {\n  if (endpoint.indexOf('wss://') === 0) {\n    return true;\n  }\n\n  return false;\n};\n\n// Connection Finite State Machine\n//\nSTATES[STOPPED] = {\n  _enter: function () {\n    this._disconnect();\n  },\n  _leave: function () {},\n  start: function () {\n    this._transition(CONNECTING);\n  },\n  close: function () {},\n};\nSTATES[CONNECTING] = {\n  _enter: function () {\n    try {\n      this._connect();\n    } catch (e) {\n      this.fire('error', e);\n    }\n  },\n  _leave: function () {},\n  open: function () {\n    var self = this;\n    var onsuccess;\n    var onfail;\n    this.lastId = 0;\n    if (this.options.authProvider) {\n      onsuccess = function () {\n        self.fire('authenticated');\n        self._transition(CONNECTED);\n      };\n      onfail = function (e) {\n        self.fire('error', e);\n      };\n      this.options.authProvider(this, onsuccess, onfail);\n    } else {\n      this._transition(CONNECTED);\n    }\n  },\n  error: function () {\n    this._transition(AWAITING);\n  },\n  close: function () {\n    this._transition(AWAITING);\n  },\n  stop: function () {\n    this._transition(STOPPED);\n  },\n};\n\nSTATES[CONNECTED] = {\n  _enter: function () {\n    this.reconnectCount = 0;\n    this._subscribeAll();\n  },\n  _leave: function () {\n    this._disconnectAll();\n  },\n  close: function () {\n    this._transition(AWAITING);\n  },\n  stop: function () {\n    this._transition(STOPPED);\n  },\n};\n\nSTATES[AWAITING] = {\n  _enter: function () {\n    var self = this;\n    var interval;\n    this._disconnect();\n    interval = this._nextReconnectInterval();\n    this.reconnectTimer = setTimeout(function () {\n      self.reconnectCount += 1;\n      self._transition(CONNECTING);\n    }, interval);\n  },\n  _leave: function () {\n    if (this.reconnectTimer !== null) {\n      clearTimeout(this.reconnectTimer);\n    }\n    this.reconnectTimer = null;\n  },\n  stop: function () {\n    this._transition(STOPPED);\n  },\n  close: function () { },\n};\n\nRTM.prototype._initConnectionFSM = function () {\n  var self = this;\n  var events = [\n    'open',\n    'close',\n    'error',\n    'start',\n    'stop',\n    'reconnect',\n  ];\n  this._transition(STOPPED);\n  events.forEach(function (ev) {\n    self.on(ev, function () {\n      self._safelyCallFSMEvent(ev);\n    });\n  });\n};\n\nRTM.prototype._safelyCallFSMEvent = function (ev) {\n  var fn = STATES[this.state][ev];\n  logger.debug('FSM event:', ev, 'Current state:', this.state);\n  if (fn) {\n    try {\n      fn.call(this);\n    } catch (error) {\n      logger.error(error, 'Unexpected error during event callback call', this.state, ev);\n    }\n  } else {\n    logger.warn('Nothing to do for event', ev, this.state);\n  }\n};\n\nRTM.prototype._transition = function (newState) {\n  logger.debug('Transition from', this.state, 'to', newState);\n  if (this.state) {\n    this._safelyCallFSMEvent('_leave');\n    this.fire('leave-' + this.state);\n  }\n  this.state = newState;\n  this._safelyCallFSMEvent('_enter');\n  this.fire('enter-' + this.state);\n};\n\nRTM.prototype._appendVersion = function (ep) {\n  var versionMatch = ep.match(/\\/(v\\d+)$/);\n  var ret = ep;\n  var ver;\n\n  if (versionMatch !== null) {\n    ver = versionMatch[1];\n    logger.warn(\n        'satori-rtm-sdk: specifying RTM endpoint with protocol version is deprecated.\\n' +\n        'satori-rtm-sdk: please remove version \\'' + ver + '\\' from endpoint:\\'' + ep + '\\''\n    );\n    return ret;\n  }\n\n  if (ret[ret.length - 1] !== '/') {\n    ret += '/';\n  }\n\n  return ret + RTM_VER;\n};\n\nmodule.exports = RTM;\n\n},{\"./auth.js\":8,\"./logger.js\":9,\"./map.js\":10,\"./observer.js\":11,\"./subscription.js\":13,\"./websocket.js\":14,\"object-assign\":7}],13:[function(require,module,exports){\nvar Observer = require('./observer.js');\nvar objectAssign = require('object-assign');\n\n/**\n * Creates an instance of a subscription. This function inherits functions from\n * [Observer.js]{@link Observer}, such as [on(event, fn)]{@link Observer#on}\n * @class\n * @augments Observer\n *\n * @description\n * <code>Subscription</code> represents a subscription to a channel. Its functions manage the\n * subscription state and respond to subscription events.\n *\n * Use <code>Subscription</code> functions to specify code that executes when an event occurs or\n * when the subscription enters a specific state.\n *\n * For example, use <code>Subscription.on(\"rtm/subscription/data\", fn())</code> to specify a\n * function that's executed when the subscription receives a message. Use\n * <code>Subscription.on(\"enter-subscribed\", fn())</code> to specify a function that's executed\n * when the subscription is active.\n *\n * When your application receives a channel message, the <code>data</code> event occurs and the\n * message is passed as a Protocol Data Unit (<strong>PDU</strong>) to the function specified for\n * <code>Subscription.on(\"rtm/subscription/data\", fn())</code>.\n *\n * You can also specify an event handler function that executes when the subscription enters or\n * leaves subscribed state. For example, to specify an event handler for the\n * <code>enter-subscribed</code> event, use <code>Subscription.on(\"enter-subscribed\", fn()}</code>.\n *\n * <strong>Note:</strong> When the connection from the client to RTM drops, all subscriptions are\n * unsubscribed and then resubscribed when the connection is restored.\n *\n * @example\n * // Creates an RTM client\n * var rtm = new RTM('YOUR_ENDPOINT', 'YOUR_APPKEY');\n * // create a new subscription to the channel named 'your-channel'\n * var subscription = rtm.subscribe('your-channel');\n *\n * subscription.on('rtm/subscription/data', function (pdu) {\n *     pdu.body.messages.forEach(console.log);\n * });\n * subscription.on('enter-subscribed', function () {\n *     console.log('Subscribed!');\n * });\n * subscription.on('data', function (pdu) {\n *     if (pdu.action.endWith('/error')) {\n *         rtm.restart();\n *     }\n * });\n *\n * @param {string} subscriptionId - unique identifier for the subscription. If you don't use the\n * <code>filter</code> parameter to specify a streamview, subscriptionId is treated as a channel\n * name.\n *\n * @param {Object} opts - additional subscription options\n *\n * @param {boolean} [opts.mode] - subscription mode\n *\n * @param {object} [opts.bodyOpts={}]\n * Additional options for the subscription. These options are sent to RTM in the <code>body</code>\n * element of the PDU that represents the subscribe request.\n *\n * @throws {TypeError} indicates that mandatory parameters are missing or invalid.\n *\n */\nfunction Subscription(subscriptionId, _opts) {\n  if (typeof subscriptionId !== 'string') {\n    throw new TypeError('\"subscriptionId\" is missing or invalid');\n  }\n  Observer.call(this);\n\n  this.options = objectAssign({}, _opts);\n  if (typeof this.options.bodyOpts !== 'object') {\n    this.options.bodyOpts = {};\n  }\n  if (this.options.fastForward) {\n    this.options.bodyOpts.fast_forward = true;\n  }\n\n  this.position = null;\n  this.subscriptionId = subscriptionId;\n  this.wasSubscribedAtLeastOnce = false;\n  this.isSubscribed = false;\n  /* eslint-enable camelcase */\n}\n\nSubscription.prototype = Object.create(Observer.prototype);\n\nSubscription.prototype.subscribePdu = function (id) {\n  var body;\n\n  // inherit all users options like 'filter', 'fast_forward'\n  if (this.options.bodyOpts.filter) {\n    body = { subscription_id: this.subscriptionId };\n  } else {\n    body = { channel: this.subscriptionId };\n  }\n\n  body = objectAssign(body, this.options.bodyOpts);\n\n  if (this.wasSubscribedAtLeastOnce) {\n    if (this.position !== null) {\n      body.position = this.position;\n    } else {\n      delete body.position;\n    }\n  }\n  return {\n    id: id,\n    action: 'rtm/subscribe',\n    body: body,\n  };\n};\n\nSubscription.prototype.unsubscribePdu = function (id) {\n  return {\n    id: id,\n    action: 'rtm/unsubscribe',\n    body: { subscription_id: this.subscriptionId },\n  };\n};\n\nSubscription.prototype.onPdu = function (pdu) {\n  var body = pdu.body;\n  if (body && body.position) {\n    this._onPosition(body.position);\n  }\n  if (pdu.action === 'rtm/subscribe/ok') {\n    this.isSubscribed = true;\n    this.wasSubscribedAtLeastOnce = true;\n    this.fire('enter-subscribed');\n  }\n  if (pdu.action === 'rtm/unsubscribe/ok') {\n    this._markAsUnsubscribed();\n  }\n  if (pdu.action === 'rtm/subscription/error') {\n    this._markAsUnsubscribed();\n  }\n  this.fire('data', pdu, this);\n  this.fire(pdu.action, pdu, this);\n};\n\nSubscription.prototype.onDisconnect = function () {\n  this._markAsUnsubscribed();\n};\n\nSubscription.prototype._onPosition = function (position) {\n  if (this.options.trackPosition) {\n    this.position = position;\n  }\n  this.fire('position', position, this);\n};\n\nSubscription.prototype._markAsUnsubscribed = function () {\n  if (this.isSubscribed) {\n    this.isSubscribed = false;\n    this.fire('leave-subscribed');\n  }\n};\n\nmodule.exports = Subscription;\n\n},{\"./observer.js\":11,\"object-assign\":7}],14:[function(require,module,exports){\nvar _global = (function () {\n  return this;\n}());\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\n\nfunction W3CWebSocket(uri) {\n  return new NativeWebSocket(uri);\n}\n\nmodule.exports = NativeWebSocket ? W3CWebSocket : null;\n\n},{}]},{},[12])(12)\n});"],"sourceRoot":"/source/"}